!function(e){e.waitForObjectOrEvent=function(e,n,t){e?t():window.addEventListener(n,t)},e.loadIframe=function(e,n,t){var i=document.createElement("iframe");i.id="stc-popup-iframe",i.setAttribute("src",e),i.style.width="100%",i.style.height="100%",i.onload=t,n.appendChild(i),iFrameResize({heightCalculationMethod:"max"},"#stc-popup-iframe")},e.addCSS=function(e,n){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),t.onload=n,document.getElementsByTagName("head").item(0).appendChild(t)},e.addScript=function(e,n){var t=document.createElement("script");t.src=e,t.async=!1,t.onload=n,document.body.appendChild(t)},e.newDOMElement=function(e,n,t,i){var o=document.createElement(e);return n&&""!==n&&(o.className=n),t&&""!==t&&(o.id=t),"object"==typeof i&&(o.attributes=i),o}}((stc=stc||{}).util=stc.util||{});var stc;!function(e,n){e.element=null,e.load=function(e){},e.init=function(){var n=stc.util.newDOMElement("div","stc-popup-modal","stcPopupModal");n.addEventListener("click",function(n){if(n.currentTarget!==n.target)return!1;e.close()},!1);var t=stc.util.newDOMElement("div","stc-popup-modal-inner","stcPopupInnerModal"),i=stc.util.newDOMElement("div","stc-popup-modal-close");i.addEventListener("click",e.close,!1),i.setAttribute("title","Close"),t.appendChild(i);var o=stc.util.newDOMElement("div","stc-popup-modal-content");t.appendChild(o),window.addEventListener("keyup",function(n){27===n.keyCode&&e.close()},!1),n.appendChild(t),document.getElementsByTagName("body")[0].appendChild(n),e.element=n},e.show=function(){e.element.className+=" on"},e.hide=function(){e.element.className=e.element.className.replace(" on","")},e.close=function(n){e.hide()}}((stc=stc||{}).modal=stc.modal||{}),function(e){"use strict";function n(e,n,t){"addEventListener"in window?e.addEventListener(n,t,!1):"attachEvent"in window&&e.attachEvent("on"+n,t)}function t(e,n,t){"removeEventListener"in window?e.removeEventListener(n,t,!1):"detachEvent"in window&&e.detachEvent("on"+n,t)}function i(e){return R+"["+function(e){var n="Host page: "+e;return window.top!==window.self&&(n=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+e:"Nested host page: "+e),n}(e)+"]"}function o(e){return W[e]?W[e].log:x}function r(e,n){s("log",e,n,o(e))}function a(e,n){s("info",e,n,o(e))}function c(e,n){s("warn",e,n,!0)}function s(e,n,t,o){!0===o&&"object"==typeof window.console&&console[e](i(n),t)}function d(e){function i(){o("Height"),o("Width"),h(function(){w(C),m(I),E("resizedCallback",C)},C,"init")}function o(e){var n=Number(W[I]["max"+e]),t=Number(W[I]["min"+e]),i=e.toLowerCase(),o=Number(C[i]);r(I,"Checking "+i+" is in range "+t+"-"+n),t>o&&(o=t,r(I,"Set "+i+" to min value")),o>n&&(o=n,r(I,"Set "+i+" to max value")),C[i]=""+o}function s(e){return F.substr(F.indexOf(":")+z+e)}function d(e,n){!function(e,n,t){j[t]||(j[t]=setTimeout(function(){j[t]=null,e()},n))}(function(){b("Send Page Info","pageInfo:"+function(){var e=document.body.getBoundingClientRect(),n=C.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:n.height,iframeWidth:n.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(n.top-e.top,10),offsetLeft:parseInt(n.left-e.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})}(),e,n)},32,n)}function v(e){var n=e.getBoundingClientRect();return f(I),{x:Math.floor(Number(n.left)+Number(N.x)),y:Math.floor(Number(n.top)+Number(N.y))}}function k(e){var n=e?v(C.iframe):{x:0,y:0},t={x:Number(C.width)+n.x,y:Number(C.height)+n.y};r(I,"Reposition requested from iFrame (offset x:"+n.x+" y:"+n.y+")"),window.top!==window.self?window.parentIFrame?window.parentIFrame["scrollTo"+(e?"Offset":"")](t.x,t.y):c(I,"Unable to scroll to requested position, window.parentIFrame not found"):(N=t,M(),r(I,"--"))}function M(){!1!==E("scrollCallback",N)?m(I):g()}function E(e,n){return u(I,e,n)}var F=e.data,C={},I=null;"[iFrameResizerChild]Ready"===F?function(){for(var e in W)b("iFrame requested init",y(e),document.getElementById(e),e)}():R===(""+F).substr(0,T)&&F.substr(T).split(":")[0]in W?(C=function(){var e=F.substr(T).split(":");return{iframe:W[e[0]]&&W[e[0]].iframe,id:e[0],height:e[1],width:e[2],type:e[3]}}(),I=H=C.id,W[I]&&(W[I].loaded=!0),!function(){var e=C.type in{true:1,false:1,undefined:1};return e&&r(I,"Ignoring init message from meta parent page"),e}()&&function(e){var n=!0;return W[e]||(n=!1,c(C.type+" No settings for "+e+". Message was: "+F)),n}(I)&&(r(I,"Received: "+F),function(){var e=!0;return null===C.iframe&&(c(I,"IFrame ("+C.id+") not found"),e=!1),e}()&&function(){var n=e.origin,t=W[I]&&W[I].checkOrigin;if(t&&""+n!="null"&&!(t.constructor===Array?function(){var e=0,i=!1;for(r(I,"Checking connection is from allowed list of origins: "+t);e<t.length;e++)if(t[e]===n){i=!0;break}return i}():function(){var e=W[I]&&W[I].remoteHost;return r(I,"Checking connection is from: "+e),n===e}()))throw new Error("Unexpected message received from: "+n+" for "+C.iframe.id+". Message was: "+e.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(W[I]&&W[I].firstRun&&W[I]&&(W[I].firstRun=!1),C.type){case"close":W[I].closeRequestCallback?u(I,"closeRequestCallback",W[I].iframe):l(C.iframe);break;case"message":!function(e){r(I,"MessageCallback passed: {iframe: "+C.iframe.id+", message: "+e+"}"),E("messageCallback",{iframe:C.iframe,message:JSON.parse(e)}),r(I,"--")}(s(6));break;case"scrollTo":k(!1);break;case"scrollToOffset":k(!0);break;case"pageInfo":d(W[I]&&W[I].iframe,I),function(){function e(e,n){function t(){W[o]?d(W[o].iframe,o):i()}["scroll","resize"].forEach(function(i){r(o,e+i+" listener for sendPageInfo"),n(window,i,t)})}function i(){e("Remove ",t)}var o=I;e("Add ",n),W[o]&&(W[o].stopPageInfo=i)}();break;case"pageInfoStop":W[I]&&W[I].stopPageInfo&&(W[I].stopPageInfo(),delete W[I].stopPageInfo);break;case"inPageLink":!function(e){var n=e.split("#")[1]||"",t=decodeURIComponent(n),i=document.getElementById(t)||document.getElementsByName(t)[0];i?function(){var e=v(i);r(I,"Moving to in page link (#"+n+") at x: "+e.x+" y: "+e.y),N={x:e.x,y:e.y},M(),r(I,"--")}():window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(n):r(I,"In page link #"+n+" not found and window.parentIFrame not found"):r(I,"In page link #"+n+" not found")}(s(9));break;case"reset":p(C);break;case"init":i(),E("initCallback",C.iframe);break;default:i()}}())):a(I,"Ignored: "+F)}function u(e,n,t){var i=null,o=null;if(W[e]){if("function"!=typeof(i=W[e][n]))throw new TypeError(n+" on iFrame["+e+"] is not a function");o=i(t)}return o}function l(e){var n=e.id;r(n,"Removing iFrame: "+n),e.parentNode&&e.parentNode.removeChild(e),u(n,"closedCallback",n),r(n,"--"),delete W[n]}function f(n){null===N&&(N={x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop},r(n,"Get page position: "+N.x+","+N.y))}function m(e){null!==N&&(window.scrollTo(N.x,N.y),r(e,"Set page position: "+N.x+","+N.y),g())}function g(){N=null}function p(e){r(e.id,"Size reset requested by "+("init"===e.type?"host page":"iFrame")),f(e.id),h(function(){w(e),b("reset","reset",e.iframe,e.id)},e,"reset")}function w(e){function n(n){O||"0"!==e[n]||(O=!0,r(i,"Hidden iFrame detected, creating visibility listener"),function(){function e(){function e(e){function n(n){return"0px"===(W[e]&&W[e].iframe.style[n])}W[e]&&function(e){return null!==e.offsetParent}(W[e].iframe)&&(n("height")||n("width"))&&b("Visibility change","resize",W[e].iframe,e)}for(var n in W)e(n)}function n(n){r("window","Mutation observed: "+n[0].target+" "+n[0].type),k(e,16)}var t=window.MutationObserver||window.WebKitMutationObserver;t&&function(){var e=document.querySelector("body");new t(n).observe(e,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0})}()}())}function t(t){(function(n){e.iframe.style[n]=e[n]+"px",r(e.id,"IFrame ("+i+") "+n+" set to "+e[n]+"px")})(t),n(t)}var i=e.iframe.id;W[i]&&(W[i].sizeHeight&&t("height"),W[i].sizeWidth&&t("width"))}function h(e,n,t){t!==n.type&&S?(r(n.id,"Requesting animation frame"),S(e)):e()}function b(e,n,t,i,o){var a=!1;i=i||t.id,W[i]&&(t&&"contentWindow"in t&&null!==t.contentWindow?function(){var o=W[i]&&W[i].targetOrigin;r(i,"["+e+"] Sending msg to iframe["+i+"] ("+n+") targetOrigin: "+o),t.contentWindow.postMessage(R+n,o)}():c(i,"["+e+"] IFrame("+i+") not found"),o&&W[i]&&W[i].warningTimeout&&(W[i].msgTimeout=setTimeout(function(){!W[i]||W[i].loaded||a||(a=!0,c(i,"IFrame has not responded within "+W[i].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ingored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))},W[i].warningTimeout)))}function y(e){return e+":"+W[e].bodyMarginV1+":"+W[e].sizeWidth+":"+W[e].log+":"+W[e].interval+":"+W[e].enablePublicMethods+":"+W[e].autoResize+":"+W[e].bodyMargin+":"+W[e].heightCalculationMethod+":"+W[e].bodyBackground+":"+W[e].bodyPadding+":"+W[e].tolerance+":"+W[e].inPageLinks+":"+W[e].resizeFrom+":"+W[e].widthCalculationMethod}function v(t,i){var o=function(e){return H=e,""===e&&(t.id=e=function(){var e=i&&i.id||L.id+I++;return null!==document.getElementById(e)&&(e+=I++),e}(),x=(i||{}).log,H=e,r(e,"Added missing iframe ID: "+e+" ("+t.src+")")),e}(t.id);o in W&&"iFrameResizer"in t?c(o,"Ignored iFrame, already setup."):(function(e){e=e||{},W[o]={firstRun:!0,iframe:t,remoteHost:t.src.split("/").slice(0,3).join("/")},function(e){if("object"!=typeof e)throw new TypeError("Options is not an object")}(e),function(e){for(var n in L)L.hasOwnProperty(n)&&(W[o][n]=e.hasOwnProperty(n)?e[n]:L[n])}(e),W[o]&&(W[o].targetOrigin=!0===W[o].checkOrigin?function(e){return""===e||"file://"===e?"*":e}(W[o].remoteHost):"*")}(i),function(){switch(r(o,"IFrame scrolling "+(W[o]&&W[o].scrolling?"enabled":"disabled")+" for "+o),t.style.overflow=!1===(W[o]&&W[o].scrolling)?"hidden":"auto",W[o]&&W[o].scrolling){case!0:t.scrolling="yes";break;case!1:t.scrolling="no";break;default:t.scrolling=W[o]?W[o].scrolling:"no"}}(),function(){function e(e){1/0!==W[o][e]&&0!==W[o][e]&&(t.style[e]=W[o][e]+"px",r(o,"Set "+e+" = "+W[o][e]+"px"))}function n(e){if(W[o]["min"+e]>W[o]["max"+e])throw new Error("Value for min"+e+" can not be greater than max"+e)}n("Height"),n("Width"),e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}(),("number"==typeof(W[o]&&W[o].bodyMargin)||"0"===(W[o]&&W[o].bodyMargin))&&(W[o].bodyMarginV1=W[o].bodyMargin,W[o].bodyMargin=W[o].bodyMargin+"px"),function(i){n(t,"load",function(){b("iFrame.onload",i,t,e,!0),function(){var e=W[o]&&W[o].firstRun,n=W[o]&&W[o].heightCalculationMethod in P;!e&&n&&p({iframe:t,height:0,width:0,type:"init"})}()}),b("init",i,t,e,!0)}(y(o)),Function.prototype.bind&&W[o]&&(W[o].iframe.iFrameResizer={close:l.bind(null,W[o].iframe),resize:b.bind(null,"Window resize","resize",W[o].iframe),moveToAnchor:function(e){b("Move to anchor","moveToAnchor:"+e,W[o].iframe,o)},sendMessage:function(e){b("Send Message","message:"+(e=JSON.stringify(e)),W[o].iframe,o)}}))}function k(e,n){null===A&&(A=setTimeout(function(){A=null,e()},n))}function M(e){r("window","Trigger event: "+e),k(function(){F("Window "+e,"resize")},16)}function E(){"hidden"!==document.visibilityState&&(r("document","Trigger event: Visiblity change"),k(function(){F("Tab Visable","resize")},16))}function F(e,n){function t(e){return W[e]&&"parent"===W[e].resizeFrom&&W[e].autoResize&&!W[e].firstRun}for(var i in W)t(i)&&b(e,n,document.getElementById(i),i)}function C(){function t(e,n){n&&(function(){if(!n.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==n.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+n.tagName+">")}(),v(n,e),i.push(n))}var i;return function(){var e,n=["moz","webkit","o","ms"];for(e=0;e<n.length&&!S;e+=1)S=window[n[e]+"RequestAnimationFrame"];S||r("setup","RequestAnimationFrame not supported")}(),n(window,"message",d),n(window,"resize",function(){M("resize")}),n(document,"visibilitychange",E),n(document,"-webkit-visibilitychange",E),n(window,"focusin",function(){M("focus")}),n(window,"focus",function(){M("focus")}),function(n,o){switch(i=[],function(e){e&&e.enablePublicMethods&&c("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}(n),typeof o){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(o||"iframe"),t.bind(e,n));break;case"object":t(n,o);break;default:throw new TypeError("Unexpected data type ("+typeof o+")")}return i}}if("undefined"!=typeof window){var I=0,x=!1,O=!1,z="message".length,R="[iFrameSizer]",T=R.length,N=null,S=window.requestAnimationFrame,P={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},W={},A=null,H="Host Page",L={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){c("MessageCallback function not defined")},resizedCallback:function(){},scrollCallback:function(){return!0}},j={};window.jQuery&&function(e){e.fn?e.fn.iFrameResize||(e.fn.iFrameResize=function(e){return this.filter("iframe").each(function(n,t){v(t,e)}).end()}):a("","Unable to bind to jQuery, it is not fully loaded.")}(window.jQuery),"function"==typeof define&&define.amd?define([],C):"object"==typeof module&&"object"==typeof module.exports?module.exports=C():window.iFrameResize=window.iFrameResize||C()}}(),stc.util.addCSS("dist/css/stc-popup.css",function(){console.log("CSS ready"),stc.modal.init(),console.log("Loading frame: "+Math.round(Date.now()/1e3)),stc.util.loadIframe("https://misc/member-popup/page/index.html?from="+stc.popupOrigin+"&to="+stc.geo.country+"&lng="+stc.geo.userLanguage,document.getElementsByClassName("stc-popup-modal-content")[0],function(){console.log("iFrame is ready: "+Math.round(Date.now()/1e3)),stc.modal.show()})});