import*as util from"./utilities2.js";import*as geo from"./members.js";import*as analytics from"./analytics.js";window.stc=window.stc||{},window.stc.util={...util,...window.stc.util},window.stc.geo={...geo,...window.stc.geo},window.stc.analytics=analytics;let element=null;const init=function(){var t=util.newDOMElement("div","stc-popup-modal","stcPopupModal");t.addEventListener("click",(function(t){if(t.currentTarget!==t.target)return!1;window.stc.modal.close()}),!1);var e=util.newDOMElement("div","stc-popup-modal-inner","stcPopupInnerModal"),n=util.newDOMElement("div","stc-popup-modal-close",null,{title:"Close"}),o=util.newDOMElement("div","stc-popup-modal-gradient-box");e.appendChild(o),n.addEventListener("click",close,!1),e.appendChild(n);var i=util.newDOMElement("div","stc-popup-modal-content");window.addEventListener("keyup",(function(t){27===t.keyCode&&window.stc.modal.close()}),!1);var l=util.newDOMElement("picture",""),s=util.newDOMElement("img","img-fluid",null,{alt:"Children playing with water",src:window.stc.modal.baseURL+"/img/children_dsk.jpg"}),a=util.newDOMElement("source",null,null,{media:"(max-width: 640px) and (orientation: portrait)",srcset:window.stc.modal.baseURL+"/img/children_mob.jpg"}),c=util.newDOMElement("source",null,null,{media:"(min-width: 641px)",srcset:window.stc.modal.baseURL+"/img/children_dsk.jpg"});l.appendChild(a),l.appendChild(c),l.appendChild(s),e.appendChild(l),e.appendChild(i),t.appendChild(e),document.getElementsByTagName("body")[0].appendChild(t),element=t;var d=geo.extendedMembers[stc.geo.country];import("./i18n/"+stc.popupOrigin+".js").then(t=>{stc.i18n=t.i18n;var e=t.i18n[stc.geo.userLanguage.substr(0,2)]?t.i18n[stc.geo.userLanguage.substr(0,2)]:t.i18n.default,n=e.countries[stc.geo.country],o=e.text.replace(/\{country\}/g,n).replace(/\{prefixCountry\}/g,geo.prefix(n)).replace(/\.\./g,"."),l=e.goBtn;i.innerHTML="<h1>"+e.title+'</h1><div class="stc-popup-modal-content-body" id="stc-popup-content"><p>'+o+'</p><p><a href="javascript:window.stc.modal.close(\'Stay\')" class="btn btn-empty btn-lg" id="stc-popup-stay">'+e.stayBtn+'</a><a href="'+d.url+'" class="btn btn-primary btn-lg" id="stc-popup-continue">'+l.replace("{country}",geo.prefix(n))+"</a></p>",document.getElementById("stc-popup-continue").addEventListener("click",stc.modal.trackOutbound)})},show=function(){element.className+=" on",document.getElementsByTagName("body")[0].style.overflow="hidden"},hide=function(){element.className=element.className.replace(" on",""),document.getElementsByTagName("body")[0].style.overflow="auto"},close=function(t){window.stc.modal.hide(),window.stc.util.setCookie("stc_popup_closed","1",14,window.stc.util.getDomain(window.location.hostname));var e="string"==typeof t?t:"Close";window.stc.analytics&&window.stc.analytics.isOn()&&window.stc.analytics.sendEvent("Member popup",e,window.stc.geo.country+" - "+e)},trackOutbound=function(t){t.preventDefault(),window.stc.analytics&&stc.analytics.isOn()?(window.stc.analytics.sendEvent("Member popup","Go",geo.country+" - Go",(function(){window.location=t.target})),window.setTimeout((function(){window.location=t.target}),1e3)):window.location=t.target};export{element,close,hide,init,show,trackOutbound};