var stc;function init(){if(!stc.popupIsInit&&"1"!==stc.util.getCookie("stc_popup_closed")&&-1<stc.geo.members.indexOf(stc.geo.country)&&stc.geo.country!==stc.popupOrigin){stc.modal=stc.modal||{},stc.modal.baseURL="https://misc/member-popup/dist";var t=document.createElement("script");t.src=stc.modal.baseURL+"/js/stc-popup.min.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),stc.popupIsInit=!0}}!function(t){t.setCookie=function(t,e,n,o){var c=new Date;c.setTime(c.getTime()+24*n*60*60*1e3);var s="expires="+c.toUTCString();document.cookie=t+"="+e+";"+s+";path=/"+(o?";domain="+o:"")},t.getCookie=function(t){for(var e=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var c=n[o];" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(e))return c.substring(e.length,c.length)}return""},t.createEvent=function(t,e){e=e||window;var n=new CustomEvent(t);e.dispatchEvent(n)},t.jsonp=function(t,e){var n=e.callbackName||"callback",o=e.onSuccess||function(){},c=e.onTimeout||function(){},s=e.timeout||10,i=window.setTimeout(function(){window[n]=function(){},c()},1e3*s);window[n]=function(t){window.clearTimeout(i),o(t)};var u=document.createElement("script");u.type="text/javascript",u.async=!0,u.src=t,document.getElementsByTagName("head")[0].appendChild(u)},t.getDomain=function(t){var e=t;if(null!==t){var n=t.split(".").reverse();null!==n&&1<n.length&&(e=n[1]+"."+n[0],t.toLowerCase().match(/\.org?\.[a-z][a-z]$/)&&2<n.length&&(e=n[2]+"."+e))}return e}}((stc=stc||{}).util=stc.util||{}),function(){if("function"==typeof window.CustomEvent)return;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}(),function(e){e.locate=function(){return stc.geo.country="",stc.geo.country=stc.util.getCookie("stc_country"),void 0===stc.geo.country||""===stc.geo.country?stc.util.jsonp("https://cfwk.savethechildren.ngo/api/geo/country?callback=setCountry",{callbackName:"setCountry",onSuccess:function(t){stc.geo.country=t.country_code,stc.util.setCookie("stc_country",stc.geo.country,14,stc.util.getDomain(window.location.hostname)),stc.util.createEvent("countryIsSet")},onTimeout:function(){},timeout:5}):stc.util.createEvent("countryIsSet"),stc.geo.country},e.setUserLanguage=function(t){return t||(t=stc.util.getCookie("stc_user_language")||(navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage)),!(t.length<2)&&(stc.util.setCookie("stc_user_language",t,14,stc.util.getDomain(window.location.hostname)),e.userLanguage=t)},e.members=["AU","CA","CH","CO","DE","DK","DO","ES","FI","FJ","GB","GT","HK","HN","ID","IN","IS","IT","JP","KR","LT","MX","NL","NO","NZ","PH","RO","SE","SZ","US","ZA"],e.setUserLanguage(),e.locate()}((stc=stc||{}).geo=stc.geo||{}),stc.geo.country?init():window.addEventListener("countryIsSet",init),stc.popupIsInit=!1;
//# sourceMappingURL=../maps/stc-popup-init.min.js.map
